version: "3"

tasks:
  default:
    cmd: task --list-all --sort alphanumeric
    desc: List all tasks

  # Initialize
  initialize:001_generate_env:
    cmd: >-
      initialize/001_generate_env.sh
      --debug
      -o ../docker/.env
    desc: Generate .env file for compose.yml

  initialize:002_generate_compose:
    cmd: >-
      initialize/002_generate_compose.sh
      --debug
      -o ../docker/compose.devel.yml
      ../docker/src/base/compose.devel.yml
      ../docker/src/extend
    desc: Generate compose.yml for devcontainer

  initialize:
    cmds:
      - task: initialize:001_generate_env
      - task: initialize:002_generate_compose
    desc: Initialize command for devcontainer

  # On create
  on_create:
    cmd:
    desc: On create command for devcontainer

  # Post create
  post_create:
    task: post_create:001_install_pre_commit
    desc: Post create command for devcontainer

  post_create:001_install_pre_commit:
    cmd: uv tool install pre-commit
    desc: Install pre-commit
